@if (userService.loading()) {
  <h3>Loading.....</h3>
} @else {
  <div class="border border-2 rounded-2 p-2 m-2">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>User Id</th>
          <th>FirstName</th>
          <th>LastName</th>
          <th>Gender</th>
          <th>Email</th>
          <th>Phone Number</th>
          <th>City</th>
          <th>State</th>
          <th>User Actions</th>
        </tr>
      </thead>

      <tbody>
        @for (user of userService.userArr(); track $index) {
          <tr>
            <td>{{ user.id }}</td>
            <td>{{ user.firstName }}</td>
            <td>{{ user.lastName }}</td>
            <td>{{ user.gender }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.phoneNumber }}</td>
            <td>{{ user.city }}</td>
            <td>{{ user.state }}</td>
            <td>
              <button
                class="btn btn-primary"
                style="margin-right: 8px"
                (click)="userService.editUser(user)"
              >
                Edit
              </button>
              <button class="btn btn-danger" (click)="userService.deleteUser(user)">Delete</button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
  <div class="class border border-2 rounded-2 p-2 m-2">
    <form
      (ngSubmit)="userService.editUserId() ? userService.updateUser() : userService.addUser()"
      class="user-form"
    >
      <div class="form-row">
        <label>ID :</label>
        <input
          type="text"
          [(ngModel)]="userService.formUser().id"
          name="id"
          [disabled]="userService.editUserId() !== null"
          required
        />
      </div>

      <div class="form-row">
        <label>First Name :</label>
        <input
          type="text"
          [(ngModel)]="userService.formUser().firstName"
          name="firstName"
          required
        />
      </div>

      <div class="form-row">
        <label>Last Name :</label>
        <input type="text" [(ngModel)]="userService.formUser().lastName" name="lastName" required />
      </div>

      <div class="form-row">
        <label>Gender :</label>
        <select [(ngModel)]="userService.formUser().gender" name="gender" required>
          <option value="">Select Gender</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
      </div>

      <div class="form-row">
        <label>Email :</label>
        <input type="email" [(ngModel)]="userService.formUser().email" name="email" required />
      </div>

      <div class="form-row">
        <label>Phone Number :</label>
        <input type="text" [(ngModel)]="userService.formUser().phoneNumber" name="phoneNumber" />
      </div>

      <div class="form-row">
        <label>City :</label>
        <input type="text" [(ngModel)]="userService.formUser().city" name="city" />
      </div>

      <div class="form-row">
        <label>State :</label>
        <input type="text" [(ngModel)]="userService.formUser().state" name="state" />
      </div>

      <div class="form-actions">
        <button class="btn btn-primary" type="submit">
          {{ userService.editUserId() ? 'Update User' : 'Add User' }}
        </button>
        <button
          class="btn btn-secondary"
          type="button"
          (click)="userService.resetForm(); userService.editUserId.set(null)"
        >
          Clear
        </button>
      </div>
    </form>
  </div>
}
